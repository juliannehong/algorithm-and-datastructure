// https://leetcode.com/problems/trapping-rain-water/description/
#include <iostream>
#include <vector>
using namespace std;

int get_water(const vector<int>& height, int from, int to, int h){
  int result = 0;
  for (int i = from; i <= to; ++i){
    result += (h - height[i]);
  }
  return result;
}

int trap(const vector<int>& height){
  int left = 0, right = 0, result = 0;
  while (left <= right && right < height.size() - 1){
    if (height[right] > height[right+1]){
      int h = min(height[left], height[right]);
      result += get_water(height, left+1, right-1, h);
      left = right;
    }
    right++;
  }
  if (height[height.size()-1] > height[right]){
    int h = min(height[left], height[height.size()-1]);
    result += get_water(height, left+1, right, h);
  }
  else;
  return result;
}

